/*
 * Copyright (C) 2024 BIRU
 *
 * This file is part of Tenzu.
 *
 * Tenzu is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Affero General Public License as published
 * by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <https://www.gnu.org/licenses/>.
 *
 * You can contact BIRU at ask@biru.sh
 *
 */

@use "themes/m3-theme" as themes;
@use "@angular/material" as mat;
@use "themes/icon-theme" as icon;
@use "themes/button-theme" as button;
@use "themes/toolbar-theme" as toolbar;
@use "themes/skeleton-theme" as skeleton;
@use "themes/avatar-theme" as avatar;
@use "themes/card-theme" as card;
@use "themes/form-field-theme" as form-field;
@use "themes/select-theme" as select;
@use "themes/radio-theme" as radio;
@use "themes/checkbox-theme" as checkbox;
@use "themes/password-strength-theme" as password-strength;
@use "themes/menu-theme" as menu;
@use "themes/dialog-theme" as dialog;
@use "themes/list-theme" as list;
@use "themes/side-nav-theme" as side-nav;
@use "themes/divider_theme" as divider;
@use "themes/tabs-theme" as tabs;
@use "themes/expansion-theme" as expansion;
@use "themes/snackbar-theme" as snackbar;
@use "themes/table-theme" as table;
@use "themes/editor-theme" as editor;
@use "themes/cdk-drag-theme" as cdk-drag;

@tailwind base;
@tailwind components;
@tailwind utilities;

@mixin apply-theme($theme) {
  @include mat.all-component-colors($theme);
  @include mat.typography-hierarchy($theme);
  @include button.color-and-typo($theme);
  @include icon.color-and-typo($theme);
  @include toolbar.color-and-typo($theme);
  @include skeleton.color-and-typo($theme);
  @include avatar.color-and-typo($theme);
  @include card.color-and-typo($theme);
  @include form-field.color-and-typo($theme);
  @include select.color-and-typo($theme);
  @include radio.color-and-typo($theme);
  @include checkbox.color-and-typo($theme);
  @include password-strength.color-and-typo($theme);
  @include dialog.color-and-typo($theme);
  @include menu.color-and-typo($theme);
  @include list.color-and-typo($theme);
  @include side-nav.color-and-typo($theme);
  @include divider.color-and-typo($theme);
  @include tabs.color-and-typo($theme);
  @include expansion.color-and-typo($theme);
  @include snackbar.color-and-typo($theme);
  @include table.color-and-typo($theme);
  @include editor.color-and-typo($theme);

  ::selection {
    background-color: mat.get-theme-color($theme, primary, 90);
  }
  
  .mat-headline-small,
  .mat-headline-large,
  .mat-headline-medium {
    color: mat.get-theme-color($theme, neutral, 10);
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    color: mat.get-theme-color($theme, neutral, 10);
    font-weight: mat.get-theme-typography($theme, title-large, font-weight);
  }

  a {
    color: mat.get-theme-color($theme, primary, 40);
    text-decoration-color: mat.get-theme-color($theme, primary, 80);
    &:hover {
      text-decoration-line: underline;
      text-decoration-color: mat.get-theme-color($theme, primary, 40);
    }
    &:focus {
      background-color: mat.get-theme-color($theme, primary, 90);
      outline: none;
    }
  }

  /************************ COLOR CLASSES *************************/

  //Primary
  @for $i from 0 through 9 {
    .text-primary-#{$i*10} {
      color: mat.get-theme-color($theme, primary, $i * 10);
    }
  }

  //Secondary
  @for $i from 0 through 9 {
    .text-secondary-#{$i*10} {
      color: mat.get-theme-color($theme, secondary, $i * 10);
    }
  }

  //Tertiary
  @for $i from 0 through 9 {
    .text-tertiary-#{$i*10} {
      color: mat.get-theme-color($theme, tertiary, $i * 10);
    }
  }

  //Neutral
  @for $i from 0 through 9 {
    .text-neutral-#{$i*10} {
      color: mat.get-theme-color($theme, neutral, $i * 10);
    }
    .border-neutral-#{$i*10} {
      border-color: mat.get-theme-color($theme, neutral, $i * 10);
    }
    .bg-neutral-#{$i*10} {
      background-color: mat.get-theme-color($theme, neutral, $i * 10);
    }
  }
  @for $i from 1 through 4 {
    .text-neutral-#{90+$i*2} {
      color: mat.get-theme-color($theme, neutral, 90+$i*2);
    }
    .border-neutral-#{90+$i*2} {
      border-color: mat.get-theme-color($theme, neutral, 90+$i*2);
    }
    .bg-neutral-#{90+$i*2} {
      background-color: mat.get-theme-color($theme, neutral, 90+$i*2);
    }
  }
  //Neutral-variant
  @for $i from 0 through 9 {
    .text-neutral-variant-#{$i*10} {
      color: mat.get-theme-color($theme, neutral-variant, $i * 10);
    }
  }

  //Error
  @for $i from 0 through 9 {
    .text-error-#{$i*10} {
      color: mat.get-theme-color($theme, error, $i * 10);
    }
  }
}

body {
  @include mat.elevation-classes();
  @include mat.app-background();
  @include mat.all-component-bases(themes.$light-theme);
  @include mat.all-component-densities(themes.$light-theme);
  @include mat.all-component-typographies(themes.$light-theme);
  font-family: "Lexend", sans-serif;
  font-optical-sizing: auto;
}

@media (prefers-color-scheme: light) {
  body {
    @include apply-theme(themes.$light-theme);
    color: mat.get-theme-color(themes.$light-theme, neutral, 17);
    background-color: mat.get-theme-color(themes.$light-theme, neutral, 100);
    @include mat.elevation-classes();
    @include mat.app-background();
    --mdc-outlined-card-container-elevation: 1px 1px 1px rgba(0, 0, 0, 0.3);
    --mat-select-container-elevation-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);
  }
}

@media (prefers-color-scheme: dark) {
  body {
    @include apply-theme(themes.$dark-theme);
    color: mat.get-theme-color(themes.$dark-theme, neutral, 17);
    background-color: mat.get-theme-color(themes.$dark-theme, neutral, 98);
    @include mat.elevation-classes();
    @include mat.app-background();
    --mdc-outlined-card-container-elevation: 1px 1px 1px rgba(0, 0, 0, 0.9);
    --mat-select-container-elevation-shadow: 2px 2px 2px rgba(0, 0, 0, 0.8);
  }
}

strong {
  @apply font-bold;
}


/************************ RESET CSS *************************/

blockquote,
dl,
dd,
h1,
h2,
h3,
h4,
h5,
h6,
hr,
figure,
p,
pre {
  margin: 0;
}

ol,
ul,
menu,
li {
  list-style: none;
  margin: 0;
  padding: 0;
}

body {
  margin: 0;
}

button,
input,
optgroup,
select,
textarea {
  font-family: inherit;
  font-feature-settings: inherit;
  font-variation-settings: inherit;
  font-size: 100%;
  font-weight: inherit;
  line-height: inherit;
  letter-spacing: inherit;
  color: inherit;
  margin: 0;
  padding: 0;
}

button,
input:where([type="button"]),
input:where([type="reset"]),
input:where([type="submit"]) {
  -webkit-appearance: button;
  background-color: transparent;
  background-image: none;
  border: 0;
}

button,
[role="button"] {
  cursor: pointer;
}

:disabled {
  cursor: default;
}

button,
select {
  text-transform: none;
}
